namespace cml.examples

import cml.generator.annotation.solidity.*

@PullPayment
contract BecomeRichest
	Party richest
	Number mostSent

	clause BecomeRichest
		party anyone
		may becomeRichest

	Boolean becomeRichest(TokenTransaction tx)
		if(tx.amount > mostSent)
			caller.deposit(tx.amount)
			transfer(richest, token.quantity)
			richest = caller
			mostSent = tx.amount
			return true
		return false
